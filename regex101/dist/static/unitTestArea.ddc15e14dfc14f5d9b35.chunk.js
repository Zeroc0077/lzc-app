!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="989eaece-25ec-4dbf-85bb-f99db558882c",e._sentryDebugIdIdentifier="sentry-dbid-989eaece-25ec-4dbf-85bb-f99db558882c")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"12.0.11"},(("undefined"!=typeof self?self:this).webpackChunkregex101=("undefined"!=typeof self?self:this).webpackChunkregex101||[]).push([[34],{2672:(e,t,s)=>{s.r(t),s.d(t,{default:()=>le});var n=s(63696),r=s(49449),a=s(41064),l=s(77131),i=s(10911),c=s(85022),o=s(51465),u=s(58026);const d=function(e,t){const s={};return t.forEach((t=>{const n=t,r=e[n];Array.isArray(r)?s[n]=r.slice():s[n]="object"==typeof r?Object.assign({},r):r})),s};var x=s(74911),h=s(86138),A=s(75812),g=s(76630),p=s(58512),m=s(6172),j=s(28117),f=s(61891),b=s(77232),N=s(57104),C=s(53478),k=s(83051),v=s(62540);const S=({className:e})=>{const t=(0,n.useRef)(),s=(0,n.useState)(!1),a=(0,i.A)(s,2),l=a[0],c=a[1],o=(0,r.jL)(),d=(0,r.GV)((e=>e.unitTests.testFilter)),h=(0,n.useCallback)((()=>c(!0)),[]),m=(0,n.useCallback)((()=>c(!1)),[]),S=(0,n.useCallback)((()=>u.Ay.emit(u.NP)),[]),y=(0,n.useCallback)((()=>u.Ay.emit(u.Pt)),[]),E=(0,n.useCallback)((()=>o((0,p.FF)(k.A.ALL))),[o]),I=(0,n.useCallback)((()=>o((0,p.FF)(k.A.PASS))),[o]),T=(0,n.useCallback)((()=>o((0,p.FF)(k.A.FAIL))),[o]);return(0,v.jsxs)("div",{className:e,children:[(0,v.jsx)(A.VE,{text:(0,x.A)("Tools and Filters"),direction:g.HO.NE,children:(0,v.jsx)(A.SC,{onClick:h,className:"KalIJ",ref:t,children:(0,v.jsx)(j.aWm,{size:18})})}),(0,v.jsxs)(f.A,{onMenuClose:m,isOpen:l,target:t.current,placement:"top",closeOnClick:!0,children:[(0,v.jsx)(N.A,{text:(0,x.A)("Tools and Filters")}),(0,v.jsx)(b.A,{}),(0,v.jsx)(C.A,{onClick:S,children:(0,x.A)("Expand all tests")}),(0,v.jsx)(C.A,{onClick:y,children:(0,x.A)("Collapse all tests")}),(0,v.jsx)(b.A,{}),(0,v.jsx)(C.A,{onClick:E,isActive:d===k.A.ALL,children:(0,x.A)("Show all tests")}),(0,v.jsx)(C.A,{onClick:I,isActive:d===k.A.PASS,children:(0,x.A)("Show only passed tests")}),(0,v.jsx)(C.A,{onClick:T,isActive:d===k.A.FAIL,children:(0,x.A)("Show only failed tests")})]})]})},y=(0,n.memo)(S),E=["criteria","target","testString","compareString"];function I(e,t){switch(e.criteria){case h.A.DOES_MATCH:return 0===t.length?(0,x.A)("Expected regex to match, but did not."):null;case h.A.DOES_NOT_MATCH:return t.length>0?(0,x.A)("Expected regex to not match, but did."):null;default:return function(e,t){if(!t||0===t.length)return(0,x.A)("The regex did not match the subject string.");const s=t.filter((t=>t.groupNum==e.target));0===s.length&&s.push({captureNum:-1,content:null,end:-1,groupName:isNaN(e.target)?e.target:null,groupNum:e.target,isParticipating:!1,match:-1,start:-1});for(let t=0,n=s.length;t<n;t++){const n=T(s[t],e);if(null!=n)return n}return null}(e,t[0])}}function T(e,t){const s=t.criteria,n=t.compareString||"",r=e||{},a=r.content,l=r.groupName,i=r.groupNum,c=r.isParticipating;if(s===h.A.IS_NULL)return null==a||""===a&&!c?null:(0,x.A)("Group {1} was not expected to participate in the match but did anyway",t.target);if(!e)return(0,x.A)("Group {1} no longer exists in the pattern or did not participate in the match",t.target);let o;switch(o=l?`${i} (${l})`:0===i?`${i} (${(0,x.A)("full match")})`:i,s){case h.A.CONTAINS:return null!=a&&-1!==a.indexOf(n)?null:(0,x.A)("Expected group {1} to contain `{2}` but did not",o,n);case h.A.EQUALS:return a===n?null:(0,x.A)("Expected group {1} to equal `{2}` but was instead `{3}`",o,n,a||"");case h.A.STARTS_WITH:const e=null==a?"":a.slice(0,n.length);return e===n?null:(0,x.A)("Expected group {1} to start with `{2}` but was instead `{3}`",o,n,e);case h.A.ENDS_WITH:const t=null==a?"":a.slice(-1*n.length);return t===n?null:(0,x.A)("Expected group {1} to end with `{2}` but was instead `{3}`",o,n,t);default:throw new Error(`Unknown unit test criteria '${s}'`)}}const w=()=>{const e=(0,r.jL)(),t=(0,r.GV)((e=>e.regexEditor.flavor)),s=(0,r.GV)((e=>e.regexEditor.regex)),a=(0,r.GV)((e=>e.regexEditor.delimiter)),l=(0,r.GV)((e=>e.regexEditor.flags)),h=(0,r.GV)((e=>e.settings.maxExecutionTime)),j=(0,r.GV)((e=>e.regexEditor.parserState)),f=j.patternError,b=j.hasParsed,N=(0,r.GV)((e=>e.unitTests.tests),((e,t)=>{if(e.length!==t.length)return!1;const s=t.reduce(((e,t)=>{if(null==t.key)throw new Error("Invalid unit test");return e[t.key]=t,e}),{});return e.every((e=>(0,c.bN)(d(e,E),d(s[e.key]||{},E))))})),C=(0,n.useRef)(new m.A).current,k=(0,n.useState)(0),S=(0,i.A)(k,2),T=S[0],w=S[1],L=(0,n.useState)(!1),V=(0,i.A)(L,2),G=V[0],D=V[1],O=(0,n.useCallback)((()=>{C.resetWorker(),w(0),D(!1),e((0,p.nA)())}),[e,C]),F=(0,n.useCallback)(((s,n,r,l,i)=>{const c={maxExecutionTime:h,flavor:t,calculateRegexSteps:!0};C.runMatch(n,a,r.replace(/g/g,""),l.testString,c,((t,s)=>{e(s||!t?(0,p.lc)({key:l.key,error:(0,x.A)("Internal engine error: {1}",s)}):(0,p.lc)({key:l.key,error:I(l,t.matchResult),steps:t.steps,time:t.time})),w((e=>e+1)),i.next()}))}),[h,a,t,e,C]),_=(0,n.useCallback)((()=>{C.resetWorker(),w(0),D(!0),e((0,p.S9)()),(0,o.A)(N.length,(e=>F(e.iteration(),s,l,N[e.iteration()],e)),(()=>{D(!1),e((0,p.nA)())}))}),[e,F,N,s,l,C]),R=O,P=(0,n.useCallback)((()=>e((0,p.Dm)(null))),[e]);(0,n.useEffect)((()=>{const e=()=>{G&&O(),b&&!f&&_()};return u.Ay.on("key:ctrlEnter",e),()=>{u.Ay.off("key:ctrlEnter",e)}}),[b,f,_,G,O]),(0,n.useEffect)((()=>{""===s||f||_()}),[_,f]),(0,n.useEffect)((()=>O),[O]);const H=Math.max(0,N.length>0?(N.length-T)/N.length*100:100);return(0,v.jsxs)("div",{className:"uLpNN",children:[(0,v.jsxs)("div",{className:"FSC5J",children:[(0,v.jsx)(y,{className:"chfL1"}),(0,v.jsxs)("div",{className:"jVqwY",children:[!G&&(0,v.jsx)(A.$n,{text:(0,x.A)("Run tests"),disabled:0===N.length||""===s||f,onClick:()=>{!b||""===s||f||G||_()}}),G&&(0,v.jsx)(A.$n,{type:g.Or.DANGER,text:(0,x.A)("Cancel"),onClick:R}),(0,v.jsx)(A.$n,{text:(0,x.A)("Add test"),onClick:P,className:"U6iyQ"})]})]}),(0,v.jsx)("div",{className:"POGWb",style:{right:`${H}%`}})]})};var L=s(75595),V=s(4452),G=s.n(V),D=s(16983),O=s(95979),F=s(67546);const _=(e,t)=>{let s;return null==e||e===D.Q?s=[h.A.DOES_MATCH,h.A.DOES_NOT_MATCH]:(s=[h.A.STARTS_WITH,h.A.ENDS_WITH,h.A.CONTAINS,h.A.EQUALS],t!==F.A.GOLANG&&"0"!==e&&s.push(h.A.IS_NULL)),s.map((e=>({value:e,text:(0,h.d)(e)})))},R=({onChange:e,currentTarget:t,currentCriteria:s,tabIndex:a})=>{const l=(0,r.GV)((e=>e.regexEditor.flavor)),c=(0,n.useRef)(null),o=_(t,l),u=(0,n.useState)(!1),d=(0,i.A)(u,2),g=d[0],p=d[1];return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(A.pF,{onClick:()=>p(!0),ref:c,disabled:g,tabIndex:a,children:(0,h.d)(s)}),(0,v.jsxs)(f.A,{isOpen:g,onMenuClose:()=>p(!1),target:c.current,closeOnClick:!0,children:[(0,v.jsx)(O.j,{text:(0,x.A)("Select assertion")}),(0,v.jsx)(O.Nj,{}),o.map((t=>(0,v.jsx)(O.Dr,{isActive:t.value===s,onClick:()=>e(t.value),children:t.text},`test-criteria-${t.value}`)))]})]})};var P=s(36626);const H=({result:e,className:t})=>null==e.time&&null==e.steps?null:(0,v.jsxs)("div",{className:t,children:[null!=e.error&&(0,v.jsx)("div",{className:"jPlRg",children:e.error}),(0,v.jsx)(A.WV,{tag:"div",text:"Test finished in {1}{2}",ph1:null!=e.steps?`${e.steps} ${1===e.steps?(0,x.A)("step"):(0,x.A)("steps")}`:(0,x.A)("approximately {1}",(0,P.D)(e.time)),ph2:null!=e.steps?`, ${(0,x.A)("approximately {1}",(0,P.D)(e.time))}`:""})]}),W=({onChange:e,currentTarget:t,tabIndex:s})=>{const a=(0,n.useRef)(null),l=(0,r.GV)((e=>e.regexEditor.parserState)),c=l.captureGroupCount,o=l.definedSubpatterns,u=l.captureGroupMap,d=(0,n.useState)(!1),h=(0,i.A)(d,2),g=h[0],p=h[1],m=((e=0,t,s)=>{const n=[{value:D.Q,text:D.B(D.Q)},{value:"0",text:D.B("0")}];for(let r=0;r<e;r++){const e=r+1;t.includes(r)||n.push({value:e,text:D.B(e,s)})}return n})(c,o,u);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(A.pF,{onClick:()=>p(!0),ref:a,disabled:g,tabIndex:s,children:(0,D.B)(t,u)}),(0,v.jsxs)(f.A,{isOpen:g,onMenuClose:()=>p(!1),target:a.current,closeOnClick:!0,children:[(0,v.jsx)(O.j,{text:(0,x.A)("Select target")}),(0,v.jsx)(O.Nj,{}),m.map((s=>(0,v.jsx)(O.Dr,{isActive:s.value===t,onClick:()=>e(s.value),children:s.text},`test-target-${s.value}`)))]})]})};var $="JrCib";const M=e=>{return 0===(e||"").length?(0,v.jsx)("em",{className:$,children:(0,x.A)("empty string")}):(0,v.jsx)("span",{className:$,children:(0,v.jsx)(A.zf,{text:(t=e||"",t.length>40?t.slice(0,40)+String.fromCharCode(8230):t)})});var t},Q=({test:e})=>{const t=(0,r.GV)((e=>e.regexEditor.parserState)).captureGroupMap,s=e.description,n=e.testString,a=e.target,l=e.criteria,i=e.compareString;return s||(0,v.jsx)(A.WV,{text:"given the string {1} assert that {2} {3} {4}",ph1:M(n),ph2:D.B(a,t),ph3:(0,h.d)(l),ph4:null==a||a===D.Q||l===h.A.IS_NULL?"":M(i)})};var z=s(5246),U="ljCy3",K="dywOt",q="KQf9w";const B=({disabled:e,isFirstItem:t,isLastItem:s,testNumber:a,className:l,tabIndex:i})=>{const c=(0,r.jL)(),o=(0,r.GV)((e=>""!==e.regexEditor.regex)),u=(0,r.GV)((e=>(0,z.hD)(e.regexEditor.flavor))),d=(0,n.useCallback)((()=>c((0,p.eh)({testNumber:a,newIndex:a+1}))),[a,c]),h=(0,n.useCallback)((()=>c((0,p.eh)({testNumber:a,newIndex:a-1}))),[a,c]),m=(0,n.useCallback)((()=>c((0,p.Nk)(a))),[a,c]);return(0,v.jsxs)("div",{className:G()("EngbT",l),children:[(0,v.jsx)(A.VE,{text:(0,x.A)("Move down"),direction:g.HO.N,children:(0,v.jsx)(A.SC,{onClick:d,disabled:s||e,className:G()(q,(s||e)&&K),tabIndex:i,children:(0,v.jsx)(j.p1_,{size:22})})}),(0,v.jsx)(A.VE,{text:(0,x.A)("Move up"),direction:g.HO.N,children:(0,v.jsx)(A.SC,{onClick:h,disabled:t||e,className:G()(q,(t||e)&&K),tabIndex:i,children:(0,v.jsx)(j.euc,{size:22})})}),u&&(0,v.jsx)(A.VE,{text:(0,x.A)("Debug Test"),direction:g.HO.N,children:(0,v.jsx)(A.N_,{to:`debugger?testId=${a}`,className:G()(q,U,!o&&K),noTheme:!0,tabIndex:o?i:-1,children:(0,v.jsx)(j.Tws,{size:18})})}),(0,v.jsx)(A.VE,{text:(0,x.A)("Delete"),direction:g.HO.NW,children:(0,v.jsx)(A.SC,{onClick:m,disabled:e,className:G()(q,U,e&&K),tabIndex:i,children:(0,v.jsx)(j.HDo,{size:18})})})]})};var J="ARCGz",Y="WYDiZ",X="_YDl7",Z="q2o92",ee="ebijN";const te=({testKey:e,testNumber:t,viewDetails:s,onViewDetailsClick:a,existingTest:l,isLastItem:c,isFirstItem:o,result:u})=>{const d=(0,r.jL)(),g=(0,r.GV)((e=>e.unitTests.testsRunning)),m=(0,r.GV)((e=>e.settings.defaultTabBehavior)),f=l||{},b=f.description,N=f.testString,C=f.compareString,k=f.target,S=f.criteria,y=(u||{}).hasError,E=(0,n.useRef)(null),I=(0,n.useState)(b||""),T=(0,i.A)(I,2),w=T[0],L=T[1],V=(0,n.useState)(N||""),O=(0,i.A)(V,2),F=O[0],P=O[1],$=(0,n.useState)(C||""),M=(0,i.A)($,2),z=M[0],U=M[1],K=(0,n.useState)(k),q=(0,i.A)(K,2),te=q[0],se=q[1],ne=(0,n.useState)(S),re=(0,i.A)(ne,2),ae=re[0],le=re[1],ie=(0,r._6)(((e,t)=>d((0,p.sL)({key:e,test:t}))),500),ce=(0,n.useCallback)((e=>{if(!m&&9===e.keyCode&&!e.shiftKey){e.preventDefault(),e.stopPropagation();const t=e.target,s=t.selectionStart,n=t.selectionEnd,r=t.value,a=r.substring(0,s)+"\t"+r.substring(n);t.selectionStart=t.selectionEnd=s+1,P(a)}}),[m]);(0,n.useEffect)((()=>{s&&E.current.focus()}),[s]),(0,r.f8)((()=>{ie(e,{description:w,testString:F,compareString:z,target:te,criteria:ae})}),[e,ie,w,F,z,te,ae]);const oe=!1===y,ue=y,de=7*t;return(0,v.jsxs)("div",{className:G()("dyFG4",ue&&Y,oe&&X),children:[(0,v.jsx)(A.SC,{className:"QIdK7",onClick:()=>a(e),tag:"div","aria-label":s?(0,x.A)("Expand test"):(0,x.A)("Collapse test"),tabIndex:1+de,children:s?(0,v.jsx)(j.p1_,{size:22}):(0,v.jsx)(j.xHA,{size:22})}),!s&&(0,v.jsxs)("div",{className:"E5War",children:[(0,v.jsx)("div",{className:J,children:(0,v.jsx)(Q,{test:l})}),(0,v.jsxs)("div",{className:G()(Z,oe&&X,ue&&Y),children:[oe&&(0,v.jsx)(j.hm8,{size:18}),ue&&(0,v.jsx)(j.Qks,{size:18})]}),(0,v.jsx)(B,{isFirstItem:o,isLastItem:c,disabled:g,testNumber:t,className:ee,tabIndex:7+de})]}),s&&(0,v.jsxs)("div",{className:"Lrfp1",children:[(0,v.jsxs)("div",{className:"RnF8o",children:[(0,v.jsx)("input",{placeholder:(0,x.A)("insert test description"),className:J,onChange:e=>L(e.target.value),value:w,ref:E,spellCheck:"false",tabIndex:2+de}),(0,v.jsxs)("div",{className:G()(Z,oe&&X,ue&&Y),children:[oe&&(0,v.jsx)(j.hm8,{size:18}),ue&&(0,v.jsx)(j.Qks,{size:18})]}),(0,v.jsx)(B,{isFirstItem:o,isLastItem:c,disabled:g,testNumber:t,className:ee,tabIndex:7+de})]}),(0,v.jsx)("div",{className:"G3Js_",children:(0,x.A)("given the following test string")}),(0,v.jsx)("textarea",{placeholder:(0,x.A)("insert test string"),className:"iqqEh",onChange:e=>P(e.target.value),value:F,rows:2,spellCheck:"false",onKeyDown:ce,tabIndex:3+de}),(0,v.jsx)(A.WV,{tag:"div",className:"u7uwI",text:"assert that {1} {2}",ph1:(0,v.jsx)(W,{currentTarget:te,onChange:e=>{se(e);const t=_(e);t.find((e=>e.value===ae))||le(t[0].value)},tabIndex:4+de}),ph2:(0,v.jsx)(R,{currentTarget:te,currentCriteria:ae,onChange:le,tabIndex:5+de})}),null!=te&&te!==D.Q&&ae!==h.A.IS_NULL&&(0,v.jsx)("textarea",{placeholder:(0,x.A)("insert comparison string"),className:"hF6QM",onChange:e=>U(e.target.value),value:z,tabIndex:6+de}),null!=u&&(0,v.jsx)(H,{result:u,className:"xecTq"})]})]})};var se="y6lwO";const ne=()=>{const e=(0,r.jL)(),t=(0,r.GV)((e=>e.unitTests.tests)),s=(0,r.GV)((e=>e.unitTests.testResults)),a=(0,r.GV)((e=>e.unitTests.testFilter)),l=(0,n.useState)([]),c=(0,i.A)(l,2),o=c[0],d=c[1],h=e=>{const t=o.filter((t=>t!==e));t.length===o.length&&t.push(e),d(t)};(0,n.useEffect)((()=>{const e=()=>d(t.map((e=>e.key))),s=()=>d([]);return u.Ay.on({[u.NP]:e,[u.Pt]:s}),()=>{u.Ay.off({[u.NP]:e,[u.Pt]:s})}}),[e,t]);const g=(0,n.useCallback)((()=>e((0,p.Dm)(null))),[e]),m=(0,n.useCallback)((()=>e((0,p.FF)(k.A.ALL))),[e]),j=(0,n.useMemo)((()=>a===k.A.ALL?t:t.filter((e=>{const t=s[e.key];return(null==t?void 0:t.hasError)===(a!==k.A.PASS)}))),[t,a,s]),f=j.length,b=(0,r.ZC)(f,f),N=f>b;if(N){const e=j[j.length-1].key;o.push(e)}return(0,v.jsx)(L.A,{className:"QH4jq",children:0===t.length?(0,v.jsx)(A.WV,{text:"There are no unit tests, click {1} to add some.",ph1:(0,v.jsx)(A.SC,{onClick:g,className:se,children:(0,x.A)("here")})}):0===j.length?(0,v.jsx)(A.WV,{text:"No tests matched your filter, click {1} to show all.",ph1:(0,v.jsx)(A.SC,{onClick:m,className:se,children:(0,x.A)("here")})}):j.map(((e,n)=>(0,v.jsx)(te,{existingTest:e,testKey:e.key,testNumber:n,viewDetails:o.includes(e.key)||N&&n+1===f,onViewDetailsClick:h,isLastItem:n===t.length-1,isFirstItem:0===n,result:s[e.key]},`unit-test-list-${e.key}`)))})},re=()=>{const e=(0,r.GV)((e=>e.unitTests.testResults)),t=Object.values(e).reduce(((e,t)=>{const s=(0,i.A)(e,2),n=s[0],r=s[1];return[n+(!1===t.hasError?1:0),r+(t.hasError?1:0)]}),[0,0]),s=(0,i.A)(t,2),n=s[0],a=s[1],l=(n>0||a>0)&&(a>0?(0,v.jsx)("span",{className:"KXkcS",children:1===a?(0,x.A)("{1} test failed",a):(0,x.A)("{1} tests failed",a)}):(0,v.jsx)("span",{className:"T0sd2",children:(0,x.A)("All tests passed")}));return(0,v.jsx)(A.JU,{className:"TcPB1",text:(0,x.A)("Unit Tests"),children:l})},ae=(0,n.memo)(re),le=()=>{const e=(0,r.jL)();return(0,n.useEffect)((()=>{e((0,l.py)(a.A.EXPLANATION))}),[e]),(0,v.jsxs)("div",{className:"lcaUs",children:[(0,v.jsx)(ae,{}),(0,v.jsxs)("div",{className:"dld7O",children:[(0,v.jsx)(ne,{}),(0,v.jsx)(w,{})]})]})}}}]);